{% extends 'usuarios/base.html' %}
{% block conteudo %}
{% load static %}

<div class="container-fluid my-5"></div>

    <div class="box-titulo">
      <h2 style="color:red; font-weight:bold; margin:0;">
        TELA DE CHAMADOS
      </h2>
    </div>

    <div class="box-form">

      <div style="text-align:left; color:orange; font-weight:bold; margin-bottom:12px;">
        CHAMADO ID: {{ doc.pk }}
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <div class="box-campo">
            <label style="color:orange; font-weight:bold;">NOME COMPLETO:</label>
            <div>
              {% if doc.usuario %}
                {{ doc.usuario.get_full_name|default:doc.usuario.username }}
              {% else %}
                Sem usuário
              {% endif %}
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="box-campo">
            <label style="color:orange; font-weight:bold;">DEPARTAMENTO:</label>
            <div>{{ doc.departamento }}</div>
          </div>
        </div>
      </div>

      <div class="box-campo">
        <label style="color:orange; font-weight:bold;">DESCRIÇÃO:</label>
        <div style="min-height:120px; white-space:pre-wrap;">{{ doc.descricao }}</div>
      </div>

      <div class="box-campo">
        <label style="color:orange; font-weight:bold;">
          INSERIR ANEXO (Formato de arquivo aceito: JPEG; JPG; PNG; EXCEL; PDF; WORD; CSV):
        </label>

        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mt-2">
          <div>
            {% if doc.arquivo %}
              <a href="{{ doc.arquivo.url }}" target="_blank" style="font-weight:bold; color:orange; text-decoration:none;">
                ABRIR ARQUIVO
              </a>
            {% else %}
              <span>Sem arquivo</span>
            {% endif %}
          </div>

        </div>
      </div>

      <form method="post" class="mt-3">
        {% csrf_token %}

        <div class="d-flex justify-content-end align-items-center gap-2">
          <input
            type="checkbox"
            id="concluido"
            name="marcar_concluido"
            {% if doc.status == "concluído" %}checked{% endif %}
          >
          <label for="concluido" style="color:orange; font-weight:bold; margin:0;">
            MARCAR COMO CONCLUÍDO
          </label>

          <button class="btn btn-danger btn-sm" type="submit">
            SALVAR
          </button>
          <a class="btn btn-dark btn-sm" href="{% url 'admin_chamados' %}">
            VOLTAR
          </a>
      </form>

    </div>
  </div>

</div>

{% endblock %}
